<!DOCTYPE html>
<html >

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Arena of the Doomseer</title>
	<!--Link to CSS-->
	<link rel="stylesheet" href="css/app.css">
	<!--Link to Google Fonts-->
	<link href="https://fonts.googleapis.com/css?family=Tangerine:400,700" rel="stylesheet">
	<!--Link to Font Awesome-->
	<link rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css">
</head>

<body>
	<!--Game Area-->
	<div class="game-area centered">
	
		<!--Player Card-->
		<div class="card card-entity" data-bind="css: { flipped: playerCardShow() }">
			<div class="card-front entity-front" data-bind="with: player">
				<i class="fa fa-arrow-circle-up levelup-icon" aria-hidden="true" data-bind="visible: skillPoints() > 0"></i>
				<h2 data-bind="text: name"></h2>
				<h3>Level <span data-bind="text: level"></span> <span data-bind="text: cl().name"></span></h3>
				<img src="" class="player-portrait" data-bind="attr: { src: portrait }">
				<h4><span data-bind="text: currentHealth"></span> / <span data-bind="text: maxHealth"></span></h4>
				<table class="stat-table" >
					<tbody data-bind="foreach: stats">
						<tr>
							<td data-bind="text: name"></td>
							<td class="text-right" data-bind="text: value"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="card-back">
				<div class="entity-back" data-bind="visible: playerBackShow()">
				</div>
				<div class="entity-front" data-bind="with: player, visible: playerInventoryShow()">
					<h2>Inventory</h2>		
					<table class="inventory-table" >
						<tbody>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/head.png"></td>
								<td data-bind="text: inventory().head().name"></td>
							</tr>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/torso.png"></td>
								<td data-bind="text: inventory().body().name"></td>
							</tr>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/sword.png"></td>
								<td data-bind="text: inventory().weapon().name"></td>
							</tr>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/feet.png"></td>
								<td data-bind="text: inventory().boots().name"></td>
							</tr>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/hands.png"></td>
								<td data-bind="text: inventory().gloves().name"></td>
							</tr>
							<tr>
								<td class="inventory-type"><img class="inventory-icon" src="images/ring.png"></td>
								<td data-bind="text: inventory().misc().name"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		
		<!--UI Section-->
		<div class="card card-ui" data-bind="css: { flipped: uiCardShow() }">
		
			<!-- Front of the UI-->
			<div class="card-front">
			
				<!--Character Creation-->
				<form class="ui-screen" data-bind="submit: createCharacter, visible: characterCreationShow()">
					<h1>Character Creation</h1>
					<div class="ui-column tall-column">
						<div>
							<label for="name">Name: </label>
							<input id="name" type="text" maxlength="10" required data-bind="value: nameInput">
						</div>
						<div class="detail-select">
							<div class="portrait-select">
								<i class="fa fa-chevron-left" aria-hidden="true" data-bind="click: togglePortrait.bind($data, -1)"></i>
								<!-- ko foreach: portraits -->
								<img class="portrait" data-bind="visible: active(), attr: { src: path }">
								<!-- /ko -->
								<i class="fa fa-chevron-right" aria-hidden="true" data-bind="click: togglePortrait.bind($data, 1)"></i>
							</div>
							<div data-bind="foreach: classes">
								<h2 class="class" data-bind="text: name, click: $parent.toggleClassSelection, style: { border: active() ? '2px solid red' : '2px solid grey' }"></h2>
							</div>
						</div>
						<button class="btn" type="submit">Next</button>
					</div>
				</form>
				
				<!--Roll Stats-->
				<form class="ui-screen" data-bind="with: player, submit: rollStats, visible: rollStatsShow()">
					<h1>Roll Stats</h1>
					<div class="reroll">
						<h4>Rerolls remaining: <span data-bind="text: rerolls"></span></h4>
						<table class="reroll-table">
							<tbody data-bind="foreach: stats">
								<tr>
									<td data-bind="text: name"></td>
									<td class="text-right" data-bind="text: value"></td>
								</tr>
							</tbody>
						</table>
						<button class="btn" type="submit">Reroll</button>
						<button class="btn" type="button" data-bind="click: $parent.toggleTown">Begin</button>
					</div>
				</form>
				
				<!--Battle Screen-->
				<div class="ui-screen battle-screen" data-bind="visible: battleShow()">
					<h1>Arena</h1>
					<div class="centered" data-bind="with: currentEnemy">
						<button class="btn" type="button" data-bind="click: $parent.physicalAttack, enable: alive()">Attack</button>
						<button class="btn" type="button" data-bind="click: $parent.magicalAttack, enable: alive()">Magic</button>
						<button class="btn" type="button" data-bind="click: $parent.toggleBattleReturn, disable: alive()">Return to town</button>
					</div>
					<div class="log-container" data-bind="style: { overflow: logOverflow() ? 'auto' : 'hidden' }">
						<div data-bind="html: battleLog">
						</div>
					</div>
				</div>
				
				<!--Level Up Screen-->
				<div class="ui-screen levelup-screen" data-bind="visible: levelUpShow()">
					<h1>Level Up</h1>
					<div class="ui-column tall-column">
						<h4 data-bind="with: player">Skill points remaining: <span data-bind="text: skillPoints"></span></h4>
						<form class="ui-column" data-bind="foreach: tempStats">
							<div class="levelup-stat">
								<i class="fa fa-minus" aria-hidden="true" data-bind="click: $parent.changeStat.bind($data, -1)"></i>
								<div class="levelup-stat-detail">
									<p data-bind="text: name"></p>
									<p data-bind="text: value"></p>
								</div>
								<i class="fa fa-plus" aria-hidden="true" data-bind="click: $parent.changeStat.bind($data, 1)"></i>
							</div>
						</form>
						<button class="btn" type="button" data-bind="click: toggleLevelUpReturn">Done</button>
					</div>
				</div>
				
				<!--Shop Screen-->
				<div class="ui-screen" data-bind="visible: shopShow()">
					<h1>Item Store</h1>
					<!-- ko with: player -->
					<img class="town-icon" src="images/gold.png"><span data-bind="text: gold"></span>
					<!-- /ko -->
					<div class="ui-column">
						<div class="item-list" data-bind="foreach: items">
							<div class="item" data-bind="visible: available(), click: $parent.toggleItem, style: { border: active() ? '2px solid red' : '2px solid grey' }">
								<h4 data-bind="text: name"></h4>
								<p><em data-bind="text: description()"></em></p>
								<p><strong>Type: </strong><span data-bind="text: type"></span></p>
								<p><strong>Price: </strong><span data-bind="text: price"></span>g</p>
							</div>
						</div>
						<p data-bind="text: townLog"></p>
						<div>
							<button class="btn" type="button" data-bind="click: buyItem">Buy</button>
							<button class="btn" type="button" data-bind="click: toggleShopReturn">Done</button>
						</div>
					</div>
				</div>
				
				<!--Healer Screen-->
				<div class="ui-screen" data-bind="visible: healerShow()">
					<h1>Town Healer</h1>
					<!-- ko with: player -->
					<img class="town-icon" src="images/gold.png"><span data-bind="text: gold"></span>
					<!-- /ko -->
					<div class="ui-column">
						<div class="options">
							<button class="btn-healer" type="button" data-bind="click: cureWounds.bind($data, 30, 100)">
								<img class="healer-btn-icon" src="images/small-cross.png" alt="Small cross icon">
								<div>
									<p class="heal-description">Cure Minor Wounds</p>
									<p>Cost: 100g</p>
								</div>
							</button>
							<button class="btn-healer" type="button" data-bind="click: cureWounds.bind($data, 70, 150)">
								<img class="healer-btn-icon" src="images/medium-cross.png" alt="Small cross icon">
								<div>
									<p class="heal-description">Cure Major Wounds</p>
									<p>Cost: 150g</p>
								</div>
							</button>
							<button class="btn-healer" type="button" data-bind="click: cureWounds.bind($data, 125, 200)">
								<img class="healer-btn-icon" src="images/cross.png" alt="Small cross icon">
								<div>
									<p class="heal-description">Cure Critical Wounds</p>
									<p>Cost: 200g</p>
								</div>
							</button>
						</div>
						<p class="town-log" data-bind="text: townLog"></p>
						<button class="btn" type="button" data-bind="click: toggleReturn">Done</button>
					</div>
				</div>
			</div>
			
			
			<!--Back of the UI-->
			<div class="card-back">
			
				<!--Start Screen-->
				<div class="ui-screen ui-back" data-bind="visible: startGameShow()">
					<h1>The Arena</h1>
					<h1 class="btn-start" data-bind="click: toggleStartGame">Start Game</h1>
				</div>
				
				<!--Town Screen-->
				<div class="ui-screen town-screen" data-bind="visible: townShow()">
					<h1>Town</h1>
					<img class="town-icon" src="images/skull.png"><span data-bind="text: wins"></span>
					<!-- ko with: player -->
					<img class="town-icon" src="images/gold.png"><span data-bind="text: gold"></span>
					<!-- /ko -->
					<div class="centered town-controls">
						<button class="btn-town" type="button" data-bind="click: toggleBattle">Battle<img class="town-btn-icon" src="images/battle.png" alt="Crossed swords icon"></button>
						<button class="btn-town" type="button" data-bind="click: toggleShop">Store<img class="town-btn-icon" src="images/store.png" alt="Store icon"></button>
						<button class="btn-town" type="button" data-bind="click: toggleHealer">Healer<img class="town-btn-icon" src="images/cross.png" alt="Cross icon"></button>
						<!-- ko with: player -->
						<button class="btn-town" type="button" data-bind="click: $parent.toggleLevelUp, enable: skillPoints() > 0">Level Up<img class="town-btn-icon" src="images/levelup.png" alt="Up arrow icon"></button>
						<!-- /ko -->
					</div>
				</div>
			</div>
		</div>
		
		
		<!--Enemy Card-->
		<div class="card card-entity" data-bind="css: { flipped: enemyCardShow() }">
			<div class="card-front entity-front" data-bind="with: currentEnemy">
				<div>
					<h2 data-bind="text: name"></h2>
					<h4><span data-bind="text: currentHealth"></span> / <span data-bind="text: maxHealth"></span></h4>
				</div>
				<img src="" class="enemy-portrait" data-bind="attr: { src: portrait }">
			</div>
			<div class="card-back entity-back">
			</div>
		</div>
	</div>
	
	<!--Death Screen-->
	<div data-bind="with: player">
		<div class="modal" data-bind="visible: alive() === false">
			<div class="popup">
				<h2>You have died!</h2>
				<button class="btn" type="button" data-bind="click: $parent.resetGame">Play Again</button>
			</div>
		</div>
	</div>
	
	<script src="lib/knockout-3.4.2.js"></script>
	<script src="lib/model.js"></script>
	<script src="lib/classes.js"></script>
	<script src="lib/app.js"></script>
</body>

</html>