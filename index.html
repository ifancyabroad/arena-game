<!DOCTYPE html>
<html >

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Arena of the Doomseer</title>
	<!--Link to CSS-->
	<link rel="stylesheet" href="css/app.css">
	<!--Link to Google Fonts-->
	<link href="https://fonts.googleapis.com/css?family=Tangerine:400,700" rel="stylesheet">
	<!--Link to Font Awesome-->
	<link rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css">
</head>

<body>
	<!--Game Area-->
	<div class="game-area centered">
	
		<!--Player Card-->
		<div class="card card-entity" data-bind="css: { flipped: playerCardShow() }">
			<div class="card-front entity-front" data-bind="with: player">
				<i class="fa fa-arrow-circle-up levelup-icon" aria-hidden="true" data-bind="visible: skillPoints() > 0"></i>
				<h2 data-bind="text: name"></h2>
				<h3>Level <span data-bind="text: level"></span> <span data-bind="text: cl().name"></span></h3>
				<img src="" class="player-portrait" data-bind="attr: { src: portrait }">
					
				<div class="player-details">
					<h4>Health: <span data-bind="text: currentHealth"></span> / <span data-bind="text: maxHealth"></span></h4>				
					<table class="stats" >
						<tbody data-bind="foreach: stats">
							<tr>
								<td data-bind="text: name"></td>
								<td class="text-right" data-bind="text: value"></td>
							</tr>
						</tbody>
					</table>
					
					<h4>Gold: <span data-bind="text: gold"></span></h4>
				</div>
			</div>
			<div class="card-back">
				<div class="entity-back" data-bind="visible: playerBackShow()">
				</div>
				<div class="inventory" data-bind="with: player, visible: playerInventoryShow()">
					<h3>Inventory</h3>
					
					<table class="items" >
						<tbody>
							<tr>
								<td>Head</td>
								<td data-bind="text: inventory().head().name"></td>
							</tr>
							<tr>
								<td>Body</td>
								<td data-bind="text: inventory().body().name"></td>
							</tr>
							<tr>
								<td>Weapon</td>
								<td data-bind="text: inventory().weapon().name"></td>
							</tr>
							<tr>
								<td>Boots</td>
								<td data-bind="text: inventory().boots().name"></td>
							</tr>
							<tr>
								<td>Gloves</td>
								<td data-bind="text: inventory().gloves().name"></td>
							</tr>
							<tr>
								<td>Misc</td>
								<td data-bind="text: inventory().misc().name"></td>
							</tr>
						</tbody>
					</table>
					<h4>Gold: <span data-bind="text: gold"></span></h4>
				</div>
			</div>
		</div>
		
		<!--UI Section-->
		<div class="card card-ui" data-bind="css: { flipped: uiCardShow() }">
		
			<!-- Front of the UI-->
			<div class="card-front">
			
				<!--Character Creation-->
				<form class="ui-screen" data-bind="submit: createCharacter, visible: characterCreationShow()">
					<h1>Character Creation</h1>
					<div class="character-create">
						<div class="name-select">
							<label for="name">Name: </label>
							<input id="name" type="text" required data-bind="value: nameInput">
						</div>
						<div class="detail-select">
							<div class="portrait-select">
								<i class="fa fa-chevron-left" aria-hidden="true" data-bind="click: togglePortrait.bind($data, -1)"></i>
								<!-- ko foreach: portraits -->
								<img class="portrait" data-bind="visible: active(), attr: { src: path }">
								<!-- /ko -->
								<i class="fa fa-chevron-right" aria-hidden="true" data-bind="click: togglePortrait.bind($data, 1)"></i>
							</div>
							<div data-bind="foreach: classes">
								<h2 class="class" data-bind="text: name, click: $parent.toggleClassSelection, style: { border: active() ? '2px solid red' : '2px solid grey' }"></h2>
							</div>
						</div>
						<button class="btn" type="submit">Next</button>
					</div>
				</form>
				
				<!--Roll Stats-->
				<form class="ui-screen" data-bind="with: player, submit: rollStats, visible: rollStatsShow()">
					<h1>Roll Stats</h1>
					<div class="reroll">
						<h4>Rerolls remaining: <span data-bind="text: rerolls"></span></h4>
						<table>
							<tbody data-bind="foreach: stats">
								<tr class="stat">
									<td data-bind="text: name"></td>
									<td data-bind="text: value"></td>
								</tr>
							</tbody>
						</table>
						<button class="btn" type="submit">Reroll</button>
						<button class="btn" type="button" data-bind="click: $parent.toggleTown">Begin</button>
					</div>
				</form>
				
				<!--Battle Screen-->
				<div class="ui-screen battle-screen" data-bind="visible: battleShow()">
					<h1>Arena</h1>
					<div class="centered" data-bind="with: currentEnemy">
						<button class="btn" type="button" data-bind="click: $parent.physicalAttack, enable: alive()">Attack</button>
						<button class="btn" type="button" data-bind="click: $parent.magicalAttack, enable: alive()">Magic</button>
						<button class="btn" type="button" data-bind="click: $parent.toggleBattleReturn, disable: alive()">Return to town</button>
					</div>
					<div class="log-container">
						<div class="battle-log" data-bind="html: battleLog">
						</div>
					</div>
				</div>
				
				<!--Level Up Screen-->
				<div class="ui-screen levelup-screen" data-bind="visible: levelUpShow()">
					<h1>Level Up</h1>
					<div class="levelup">
						<h4 data-bind="with: player">Skill points remaining: <span data-bind="text: skillPoints"></span></h4>
						<form class="levelup-stats" data-bind="foreach: tempStats">
							<div class="levelup-stat">
								<i class="fa fa-minus" aria-hidden="true" data-bind="click: $parent.changeStat.bind($data, -1)"></i>
								<div class="levelup-stat-detail">
									<p data-bind="text: name"></p>
									<p data-bind="text: value"></p>
								</div>
								<i class="fa fa-plus" aria-hidden="true" data-bind="click: $parent.changeStat.bind($data, 1)"></i>
							</div>
						</form>
						<button class="btn" type="button" data-bind="click: toggleLevelUpReturn">Done</button>
					</div>
				</div>
				
				<!--Shop Screen-->
				<div class="ui-screen shop-screen" data-bind="visible: shopShow()">
					<h1>Item Store</h1>
					<div class="item-list" data-bind="foreach: items">
						<div class="item" data-bind="click: $parent.toggleItem, style: { border: active() ? '2px solid red' : '2px solid grey' }">
							<p data-bind="text: type"></p>
							<p data-bind="text: name"></p>
							<p data-bind="text: price"></p>
						</div>
					</div>
					<button class="btn" type="button" data-bind="click: buyItem">Buy</button>
					<button class="btn" type="button" data-bind="click: toggleShopReturn">Done</button>
				</div>
				
				<!--Healer Screen-->
				<div class="ui-screen healer-screen" data-bind="visible: healerShow()">
					<h1>Town Healer</h1>
					<div class="healer">
						<div class="options">
							<p>Price: 100 gold</p>
							<button class="btn" type="button" data-bind="click: cureWounds.bind($data, 30, 100)">Cure Minor Wounds</button>
							<p>Price: 150 gold</p>
							<button class="btn" type="button" data-bind="click: cureWounds.bind($data, 70, 150)">Cure Major Wounds</button>
							<p>Price: 200 gold</p>
							<button class="btn" type="button" data-bind="click: cureWounds.bind($data, 125, 200)">Cure Critical Wounds</button>
						</div>
						<p class="healer-log" data-bind="text: healerLog"></p>
						<button class="btn" type="button" data-bind="click: toggleReturn">Done</button>
					</div>
				</div>
			</div>
			
			
			<!--Back of the UI-->
			<div class="card-back">
			
				<!--Start Screen-->
				<div class="ui-screen ui-back" data-bind="visible: startGameShow()">
					<h1 class="btn-start" data-bind="click: toggleStartGame">Start Game</h1>
				</div>
				
				<!--Town Screen-->
				<div class="ui-screen town-screen" data-bind="visible: townShow()">
					<h1>Town</h1>
					<h4>Battles Won: <span data-bind="text: wins"></span></h4>
					<div class="centered">
						<button class="btn" type="button" data-bind="click: toggleBattle">Fight next battle!</button>
						<!-- ko with: player -->
						<button class="btn" type="button" data-bind="click: $parent.toggleLevelUp, enable: skillPoints() > 0">Level Up</button>
						<!-- /ko -->
						<button class="btn" type="button" data-bind="click: toggleShop">Visit Shop</button>
						<button class="btn" type="button" data-bind="click: toggleHealer">Visit Healer</button>
					</div>
				</div>
			</div>
		</div>
		
		
		<!--Enemy Card-->
		<div class="card card-entity" data-bind="css: { flipped: enemyCardShow() }">
			<div class="card-front entity-front" data-bind="with: currentEnemy">
				<div class="enemy-header">
					<h2 data-bind="text: name"></h2>
					<h4>Health: <span data-bind="text: currentHealth"></span> / <span data-bind="text: maxHealth"></span></h4>
				</div>
				<img src="" class="enemy-portrait" data-bind="attr: { src: portrait }">
			</div>
			<div class="card-back entity-back">
			</div>
		</div>
	</div>
	
	<!--Death Screen-->
	<div class="modal-container" data-bind="with: player">
		<div class="modal" data-bind="visible: alive() === false">
			<div class="popup">
				<h2>You have died!</h2>
				<button class="btn" type="button" data-bind="click: $parent.resetGame">Play Again</button>
			</div>
		</div>
	</div>
	
	<script src='js/lib/knockout-3.4.2.js'></script>
	<script src="js/app.js"></script>
</body>

</html>